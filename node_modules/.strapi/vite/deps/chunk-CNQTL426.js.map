{
  "version": 3,
  "sources": ["../../../@strapi/admin/admin/src/features/Notifications.tsx"],
  "sourcesContent": ["import * as React from 'react';\n\nimport { Alert, AlertVariant, Flex, useCallbackRef, Link, Box } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { HEIGHT_TOP_NAVIGATION } from '../constants/theme';\n\ninterface NotificationLink {\n  label: string;\n  target?: string;\n  url: string;\n}\n\ninterface NotificationConfig {\n  blockTransition?: boolean;\n  link?: NotificationLink;\n  message?: string;\n  onClose?: () => void;\n  timeout?: number;\n  title?: string;\n  type?: 'info' | 'warning' | 'danger' | 'success';\n}\n\n/* -------------------------------------------------------------------------------------------------\n * Context\n * -----------------------------------------------------------------------------------------------*/\n\ninterface NotificationsContextValue {\n  /**\n   * Toggles a notification, wrapped in `useCallback` for a stable identity.\n   */\n  toggleNotification: (config: NotificationConfig) => void;\n}\n\nconst NotificationsContext = React.createContext<NotificationsContextValue>({\n  toggleNotification: () => {},\n});\n\n/* -------------------------------------------------------------------------------------------------\n * Provider\n * -----------------------------------------------------------------------------------------------*/\n\ninterface NotificationsProviderProps {\n  children: React.ReactNode;\n}\ninterface Notification extends NotificationConfig {\n  id: number;\n}\n\n/**\n * @internal\n * @description DO NOT USE. This will be removed before stable release of v5.\n */\nconst NotificationsProvider = ({ children }: NotificationsProviderProps) => {\n  const notificationIdRef = React.useRef(0);\n\n  const [notifications, setNotifications] = React.useState<Notification[]>([]);\n\n  const toggleNotification = React.useCallback(\n    ({ type, message, link, timeout, blockTransition, onClose, title }: NotificationConfig) => {\n      setNotifications((s) => [\n        ...s,\n        {\n          id: notificationIdRef.current++,\n          type,\n          message,\n          link,\n          timeout,\n          blockTransition,\n          onClose,\n          title,\n        },\n      ]);\n    },\n    []\n  );\n\n  const clearNotification = React.useCallback((id: number) => {\n    setNotifications((s) => s.filter((n) => n.id !== id));\n  }, []);\n\n  const value = React.useMemo(() => ({ toggleNotification }), [toggleNotification]);\n\n  return (\n    <NotificationsContext.Provider value={value}>\n      <Flex\n        left=\"50%\"\n        transform=\"translateX(-50%)\"\n        position=\"fixed\"\n        direction=\"column\"\n        alignItems=\"stretch\"\n        gap={4}\n        marginTop={4}\n        top={HEIGHT_TOP_NAVIGATION}\n        width=\"100%\"\n        maxWidth={`50rem`}\n        zIndex=\"notification\"\n      >\n        {notifications.map((notification) => {\n          return (\n            <Box key={notification.id} paddingLeft={4} paddingRight={4}>\n              <Notification {...notification} clearNotification={clearNotification} />\n            </Box>\n          );\n        })}\n      </Flex>\n      {children}\n    </NotificationsContext.Provider>\n  );\n};\n\ninterface NotificationProps extends Notification {\n  clearNotification: (id: number) => void;\n}\n\nconst Notification = ({\n  clearNotification,\n  blockTransition = false,\n  id,\n  link,\n  message,\n  onClose,\n  timeout = 2500,\n  title,\n  type,\n}: NotificationProps) => {\n  const { formatMessage } = useIntl();\n  /**\n   * Chances are `onClose` won't be classed as stabilised,\n   * so we use `useCallbackRef` to avoid make it stable.\n   */\n  const onCloseCallback = useCallbackRef(onClose);\n\n  const handleClose = React.useCallback(() => {\n    onCloseCallback();\n\n    clearNotification(id);\n  }, [clearNotification, id, onCloseCallback]);\n\n  // eslint-disable-next-line consistent-return\n  React.useEffect(() => {\n    if (!blockTransition) {\n      const timeoutReference = setTimeout(() => {\n        handleClose();\n      }, timeout);\n\n      return () => {\n        clearTimeout(timeoutReference);\n      };\n    }\n  }, [blockTransition, handleClose, timeout]);\n\n  const getVariant = (): AlertVariant => {\n    switch (type) {\n      case 'info':\n        return 'default';\n      case 'danger':\n        return 'danger';\n      case 'warning':\n        return 'warning';\n      default:\n        return 'success';\n    }\n  };\n\n  return (\n    <Alert\n      action={\n        link ? (\n          <Link href={link.url} isExternal>\n            {link.label}\n          </Link>\n        ) : undefined\n      }\n      onClose={handleClose}\n      closeLabel={formatMessage({\n        id: 'global.close',\n        defaultMessage: 'Close',\n      })}\n      title={title}\n      variant={getVariant()}\n    >\n      {message}\n    </Alert>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Hook\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @preserve\n * @description Returns an object to interact with the notification\n * system. The callbacks are wrapped in `useCallback` for a stable\n * identity.\n *\n * @example\n * ```tsx\n * import { useNotification } from '@strapi/strapi/admin';\n *\n * const MyComponent = () => {\n *  const { toggleNotification } = useNotification();\n *\n *  return <button onClick={() => toggleNotification({ message: 'Hello world!' })}>Click me</button>;\n */\nconst useNotification = () => React.useContext(NotificationsContext);\n\nexport { NotificationsProvider, useNotification };\nexport type { NotificationConfig, NotificationsContextValue };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAkCA,IAAMA,uBAA6BC,oBAAyC;EAC1EC,oBAAoB,MAAO;EAAA;AAC7B,CAAA;AAiBMC,IAAAA,wBAAwB,CAAC,EAAEC,SAAQ,MAA8B;AACrE,QAAMC,oBAA0BC,aAAO,CAAA;AAEvC,QAAM,CAACC,eAAeC,gBAAAA,IAA0BC,eAAyB,CAAA,CAAE;AAE3E,QAAMP,qBAA2BQ,kBAC/B,CAAC,EAAEC,MAAMC,SAASC,MAAMC,SAASC,iBAAiBC,SAASC,MAAK,MAAsB;AACpFT,qBAAiB,CAACU,MAAM;MACnBA,GAAAA;MACH;QACEC,IAAId,kBAAkBe;QACtBT;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACF;IACD,CAAA;EACH,GACA,CAAA,CAAE;AAGJ,QAAMI,oBAA0BX,kBAAY,CAACS,OAAAA;AAC3CX,qBAAiB,CAACU,MAAMA,EAAEI,OAAO,CAACC,MAAMA,EAAEJ,OAAOA,EAAAA,CAAAA;EACnD,GAAG,CAAA,CAAE;AAEL,QAAMK,QAAcC,cAAQ,OAAO;IAAEvB;EAAmB,IAAI;IAACA;EAAmB,CAAA;AAEhF,aACEwB,yBAAC1B,qBAAqB2B,UAAQ;IAACH;;UAC7BI,wBAACC,MAAAA;QACCC,MAAK;QACLC,WAAU;QACVC,UAAS;QACTC,WAAU;QACVC,YAAW;QACXC,KAAK;QACLC,WAAW;QACXC,KAAKC;QACLC,OAAM;QACNC,UAAU;QACVC,QAAO;kBAENlC,cAAcmC,IAAI,CAACC,iBAAAA;AAClB,qBACEf,wBAACgB,KAAAA;YAA0BC,aAAa;YAAGC,cAAc;YACvD,cAAAlB,wBAACmB,cAAAA;cAAc,GAAGJ;cAActB;;UADxBsB,GAAAA,aAAaxB,EAAE;QAI7B,CAAA;;MAEDf;;;AAGP;AAMA,IAAM2C,eAAe,CAAC,EACpB1B,mBACAN,kBAAkB,OAClBI,IACAN,MACAD,SACAI,SACAF,UAAU,MACVG,OACAN,KAAI,MACc;AAClB,QAAM,EAAEqC,cAAa,IAAKC,QAAAA;AAK1B,QAAMC,kBAAkBC,eAAenC,OAAAA;AAEvC,QAAMoC,cAAoB1C,kBAAY,MAAA;AACpCwC,oBAAAA;AAEA7B,sBAAkBF,EAAAA;KACjB;IAACE;IAAmBF;IAAI+B;EAAgB,CAAA;AAG3CG,EAAMC,gBAAU,MAAA;AACd,QAAI,CAACvC,iBAAiB;AACpB,YAAMwC,mBAAmBC,WAAW,MAAA;AAClCJ,oBAAAA;SACCtC,OAAAA;AAEH,aAAO,MAAA;AACL2C,qBAAaF,gBAAAA;MACf;IACF;KACC;IAACxC;IAAiBqC;IAAatC;EAAQ,CAAA;AAE1C,QAAM4C,aAAa,MAAA;AACjB,YAAQ/C,MAAAA;MACN,KAAK;AACH,eAAO;MACT,KAAK;AACH,eAAO;MACT,KAAK;AACH,eAAO;MACT;AACE,eAAO;IACX;EACF;AAEA,aACEiB,wBAAC+B,OAAAA;IACCC,QACE/C,WACEe,wBAACiC,MAAAA;MAAKC,MAAMjD,KAAKkD;MAAKC,YAAU;MAC7BnD,UAAAA,KAAKoD;IAENC,CAAAA,IAAAA;IAENlD,SAASoC;IACTe,YAAYnB,cAAc;MACxB7B,IAAI;MACJiD,gBAAgB;IAClB,CAAA;IACAnD;IACAoD,SAASX,WAAAA;IAER9C,UAAAA;;AAGP;AAqBM0D,IAAAA,kBAAkB,MAAYC,iBAAWvE,oBAAAA;",
  "names": ["NotificationsContext", "createContext", "toggleNotification", "NotificationsProvider", "children", "notificationIdRef", "useRef", "notifications", "setNotifications", "useState", "useCallback", "type", "message", "link", "timeout", "blockTransition", "onClose", "title", "s", "id", "current", "clearNotification", "filter", "n", "value", "useMemo", "_jsxs", "Provider", "_jsx", "Flex", "left", "transform", "position", "direction", "alignItems", "gap", "marginTop", "top", "HEIGHT_TOP_NAVIGATION", "width", "maxWidth", "zIndex", "map", "notification", "Box", "paddingLeft", "paddingRight", "Notification", "formatMessage", "useIntl", "onCloseCallback", "useCallbackRef", "handleClose", "React", "useEffect", "timeoutReference", "setTimeout", "clearTimeout", "getVariant", "Alert", "action", "Link", "href", "url", "isExternal", "label", "undefined", "closeLabel", "defaultMessage", "variant", "useNotification", "useContext"]
}
